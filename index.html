<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Jogo do C√≠rculo</title>
  <style>
    body { margin: 0; background: #111; color: #fff; font-family: sans-serif; overflow: hidden; }
    canvas { display: block; background: #222; margin: 0 auto; }
    #ui, #menu, #shop, #config, #pause, #achievements { position: absolute; top: 0; left: 0; padding: 10px; }
    button { margin: 5px; padding: 10px; border: none; border-radius: 5px; background: #444; color: #fff; cursor: pointer; }
    #ui { top: 10px; left: 10px; }
    #menu, #shop, #config, #pause, #achievements { display: none; background: rgba(0,0,0,0.8); width: 100%; height: 100%; justify-content: center; align-items: center; flex-direction: column; }
    #menu, #shop, #config, #pause, #achievements { display: flex; }
  </style>
</head>
<body>
  <canvas id="game" width="600" height="400"></canvas>
  <div id="ui">
    <div>üí∞ Moedas: <span id="coins">0</span></div>
    <button onclick="togglePause()">‚è∏ Pausar</button>
    <button onclick="openShop()">üõí Loja</button>
    <button onclick="openConfig()">‚öôÔ∏è Config</button>
  </div>

  <div id="menu">
    <h1>Jogo do C√≠rculo</h1>
    <button onclick="startGame()">‚ñ∂Ô∏è Iniciar</button>
  </div>

  <div id="shop">
    <h2>Loja</h2>
    <button onclick="buySpeed()">‚ö° Velocidade - <span id="speedCost">25</span></button>
    <button onclick="backToGame()">‚Ü©Ô∏è Voltar</button>
  </div>

  <div id="config">
    <h2>Configura√ß√µes</h2>
    <button onclick="toggleSound()">üîä M√∫sica: <span id="soundStatus">ON</span></button>
    <button onclick="backToGame()">‚Ü©Ô∏è Voltar</button>
  </div>

  <div id="pause">
    <h2>Pausado</h2>
    <button onclick="togglePause()">‚ñ∂Ô∏è Retomar</button>
  </div>

  <div id="achievements">
    <h2>üèÜ Conquistas</h2>
    <p id="achMsg"></p>
    <button onclick="closeAchievements()">OK</button>
  </div>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    let circle = { x: 300, y: 200, r: 15, dx: 2, dy: 2, speed: 2 };
    let coins = parseInt(localStorage.getItem("coins")) || 0;
    let upgrades = parseInt(localStorage.getItem("speedLevel")) || 0;
    let gameRunning = false;
    let paused = false;
    let musicOn = true;

    let speedCosts = [25, 50, 100, 150];
    const maxSpeedLevel = speedCosts.length;

    let bgMusic = new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_0c32938b79.mp3");
    bgMusic.loop = true;

    function drawCircle() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.beginPath();
      ctx.arc(circle.x, circle.y, circle.r, 0, Math.PI * 2);
      ctx.fillStyle = "deepskyblue";
      ctx.fill();
    }

    function moveCircle() {
      if (!paused) {
        circle.x += circle.dx * circle.speed;
        circle.y += circle.dy * circle.speed;

        if (circle.x + circle.r > canvas.width || circle.x - circle.r < 0) circle.dx *= -1;
        if (circle.y + circle.r > canvas.height || circle.y - circle.r < 0) circle.dy *= -1;

        coins++;
        updateUI();
      }
    }

    function updateUI() {
      document.getElementById("coins").textContent = coins;
      if (upgrades < maxSpeedLevel) {
        document.getElementById("speedCost").textContent = speedCosts[upgrades];
      } else {
        document.getElementById("speedCost").textContent = "MAX";
      }
      localStorage.setItem("coins", coins);
      localStorage.setItem("speedLevel", upgrades);
    }

    function loop() {
      if (gameRunning) {
        moveCircle();
        drawCircle();
        requestAnimationFrame(loop);
      }
    }

    function startGame() {
      document.getElementById("menu").style.display = "none";
      gameRunning = true;
      if (musicOn) bgMusic.play();
      loop();
    }

    function togglePause() {
      paused = !paused;
      document.getElementById("pause").style.display = paused ? "flex" : "none";
    }

    function openShop() {
      paused = true;
      document.getElementById("shop").style.display = "flex";
    }

    function openConfig() {
      paused = true;
      document.getElementById("config").style.display = "flex";
    }

    function backToGame() {
      paused = false;
      document.getElementById("shop").style.display = "none";
      document.getElementById("config").style.display = "none";
    }

    function toggleSound() {
      musicOn = !musicOn;
      document.getElementById("soundStatus").textContent = musicOn ? "ON" : "OFF";
      if (musicOn) bgMusic.play();
      else bgMusic.pause();
    }

    function buySpeed() {
      if (upgrades >= maxSpeedLevel) return;
      let cost = speedCosts[upgrades];
      if (coins >= cost) {
        coins -= cost;
        upgrades++;
        circle.speed += 0.5;
        updateUI();

        if (upgrades === maxSpeedLevel) {
          coins += 500;
          showAchievement("üèÅ Limite m√°ximo de velocidade alcan√ßado! +500 moedas!");
        }
      }
    }

    function showAchievement(text) {
      document.getElementById("achievements").style.display = "flex";
      document.getElementById("achMsg").textContent = text;
    }

    function closeAchievements() {
      document.getElementById("achievements").style.display = "none";
    }

    updateUI();
    drawCircle();
  </script>
</body>
</html>
